<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Thu Nov 21 19:02:46 MST 2024 -->
<title>SongServiceImpl</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-11-21">
<meta name="description" content="declaration: package: edu.carroll.initMusic.service, class: SongServiceImpl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li>Field</li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">edu.carroll.initMusic.service</a></div>
<h1 title="Class SongServiceImpl" class="title">Class SongServiceImpl</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">edu.carroll.initMusic.service.SongServiceImpl</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="annotations">@Service
</span><span class="modifiers">public class </span><span class="element-name type-name-label">SongServiceImpl</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></span></div>
<div class="block">This services handles Searching for songs using the deezer api.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(edu.carroll.initMusic.jpa.repo.QueryCacheRepository,edu.carroll.initMusic.jpa.repo.SongRepository,edu.carroll.initMusic.service.SongSearchService)" class="member-name-link">SongServiceImpl</a><wbr>(<a href="../jpa/repo/QueryCacheRepository.html" title="interface in edu.carroll.initMusic.jpa.repo">QueryCacheRepository</a>&nbsp;queryCacheRepository,
 <a href="../jpa/repo/SongRepository.html" title="interface in edu.carroll.initMusic.jpa.repo">SongRepository</a>&nbsp;songRepository,
 <a href="SongSearchService.html" title="interface in edu.carroll.initMusic.service">SongSearchService</a>&nbsp;songSearchService)</code></div>
<div class="col-last even-row-color">
<div class="block">Constructor</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clearRepo()" class="member-name-link">clearRepo</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clears all songs from the repository.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../MethodOutcome.html" title="enum class in edu.carroll.initMusic">MethodOutcome</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createCache(java.lang.String,java.util.Set)" class="member-name-link">createCache</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;&nbsp;songs)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Creates a new QueryCache with the given query and songs</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#findSong(edu.carroll.initMusic.jpa.model.Song)" class="member-name-link">findSong</a><wbr>(<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&nbsp;song)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getLocalCache(java.lang.String)" class="member-name-link">getLocalCache</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the local cache with the given query, if there is one</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getQueryString(java.lang.String,java.lang.String)" class="member-name-link">getQueryString</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;songName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;artistName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Formats the given song name and artist name into a format like <code>Song:{songName}+Artist:{artistName}</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getRepoSize()" class="member-name-link">getRepoSize</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves the number of songs currently stored in the repository.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSongPreview(java.lang.Long)" class="member-name-link">getSongPreview</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Gets the preview link for the given id using songSearchService, since we have to get it externally
 and reload it each time because some links expire after a day.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isValidQuery(java.lang.String)" class="member-name-link">isValidQuery</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if the given query is valid.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a><wbr>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#searchForSongs(java.lang.String,java.lang.String)" class="member-name-link">searchForSongs</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;songName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;artistName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Searches for songs related to the given query.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(edu.carroll.initMusic.jpa.repo.QueryCacheRepository,edu.carroll.initMusic.jpa.repo.SongRepository,edu.carroll.initMusic.service.SongSearchService)">
<h3>SongServiceImpl</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">SongServiceImpl</span><wbr><span class="parameters">(<a href="../jpa/repo/QueryCacheRepository.html" title="interface in edu.carroll.initMusic.jpa.repo">QueryCacheRepository</a>&nbsp;queryCacheRepository,
 <a href="../jpa/repo/SongRepository.html" title="interface in edu.carroll.initMusic.jpa.repo">SongRepository</a>&nbsp;songRepository,
 <a href="SongSearchService.html" title="interface in edu.carroll.initMusic.service">SongSearchService</a>&nbsp;songSearchService)</span></div>
<div class="block">Constructor</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getQueryString(java.lang.String,java.lang.String)">
<h3>getQueryString</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getQueryString</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;songName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;artistName)</span></div>
<div class="block">Formats the given song name and artist name into a format like <code>Song:{songName}+Artist:{artistName}</code>.
 If there is only a songName, it will look like <code>Song:{SongName}</code>. If there is only a artistName, it will
 look like <code>Artist:{artistName}</code></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>songName</code> - Song name</dd>
<dd><code>artistName</code> - Artist name</dd>
<dt>Returns:</dt>
<dd>Formatted String</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="searchForSongs(java.lang.String,java.lang.String)">
<h3>searchForSongs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;</span>&nbsp;<span class="element-name">searchForSongs</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;songName,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;artistName)</span></div>
<div class="block">Searches for songs related to the given query. First checks if there is a cache with the
 given query. If there is, the set of songs is returned. If not, uses the songSearchService
 to search externally for songs using an API.

 <p>
 If a cache is found, its set of songs gets converted to a tree set so it can be sorted. The set is sorted by the JaroWinklerDistance the song name or artist name is from the target song name or artist name.
 If the distance is the same, it compares the Deezer ID of each song, which is always unique. Same sorting
 logic as in <a href="SongSearchDeezerImpl.html#externalSearchForSongs(java.lang.String,java.lang.String)"><code>SongSearchDeezerImpl.externalSearchForSongs(String, String)</code></a>.
 </p></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SongService.html#searchForSongs(java.lang.String,java.lang.String)">searchForSongs</a></code>&nbsp;in interface&nbsp;<code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>songName</code> - Name of song to look for</dd>
<dd><code>artistName</code> - Name of artist to look for</dd>
<dt>Returns:</dt>
<dd>Set of songs related to the query, empty set if no songs were found</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="SongSearchService.html" title="interface in edu.carroll.initMusic.service"><code>SongSearchService</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getLocalCache(java.lang.String)">
<h3>getLocalCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;</span>&nbsp;<span class="element-name">getLocalCache</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query)</span></div>
<div class="block">Gets the local cache with the given query, if there is one

 <p>
 For this to return the correct cache, the passed query needs to be in the same format the
 <a href="#getQueryString(java.lang.String,java.lang.String)"><code>getQueryString(String, String)</code></a> would put it in.
 </p></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>query</code> - Query to search for</dd>
<dt>Returns:</dt>
<dd>Set of songs related to given query, null if cache wasn't found</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../jpa/model/QueryCache.html" title="class in edu.carroll.initMusic.jpa.model"><code>QueryCache</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createCache(java.lang.String,java.util.Set)">
<h3>createCache</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../MethodOutcome.html" title="enum class in edu.carroll.initMusic">MethodOutcome</a></span>&nbsp;<span class="element-name">createCache</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query,
 <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Set.html" title="class or interface in java.util" class="external-link">Set</a>&lt;<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&gt;&nbsp;songs)</span></div>
<div class="block">Creates a new QueryCache with the given query and songs</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>query</code> - Query that was searched for</dd>
<dd><code>songs</code> - Songs found related to query</dd>
<dt>Returns:</dt>
<dd>A MethodOutcome enum, which represents the outcome of the method</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><a href="../jpa/model/QueryCache.html" title="class in edu.carroll.initMusic.jpa.model"><code>QueryCache</code></a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isValidQuery(java.lang.String)">
<h3>isValidQuery</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isValidQuery</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;query)</span></div>
<div class="block">Checks if the given query is valid.
 <p>
 A query is valid if:
     <ul>
         <li>It's not null</li>
         <li>It's not empty</li>
         <li>It's length is greater than MIN_QUERY_LENGTH</li>
         <li>It's length is less than MAX_QUERY_LENGTH</li>
     </ul>
 </p>
 Same method as in <a href="SongSearchDeezerImpl.html" title="class in edu.carroll.initMusic.service"><code>SongSearchDeezerImpl</code></a>, didn't really feel the need to make something separate
 to reduce duplicate code since it's just used in two services.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SongService.html#isValidQuery(java.lang.String)">isValidQuery</a></code>&nbsp;in interface&nbsp;<code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>query</code> - Query to check if valid</dd>
<dt>Returns:</dt>
<dd><code>true</code> if query is valid, <code>false</code> otherwise.</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list">
<li><code>MAX_QUERY_LENGTH</code></li>
<li><code>MIN_QUERY_LENGTH</code></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getRepoSize()">
<h3>getRepoSize</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long</span>&nbsp;<span class="element-name">getRepoSize</span>()</div>
<div class="block">Retrieves the number of songs currently stored in the repository.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SongService.html#getRepoSize()">getRepoSize</a></code>&nbsp;in interface&nbsp;<code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
<dt>Returns:</dt>
<dd>the size of the song repository.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clearRepo()">
<h3>clearRepo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">clearRepo</span>()</div>
<div class="block">Clears all songs from the repository.
 This is primarily useful for testing or resetting data.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SongService.html#clearRepo()">clearRepo</a></code>&nbsp;in interface&nbsp;<code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="findSong(edu.carroll.initMusic.jpa.model.Song)">
<h3>findSong</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a></span>&nbsp;<span class="element-name">findSong</span><wbr><span class="parameters">(<a href="../jpa/model/Song.html" title="class in edu.carroll.initMusic.jpa.model">Song</a>&nbsp;song)</span></div>
</section>
</li>
<li>
<section class="detail" id="getSongPreview(java.lang.Long)">
<h3>getSongPreview</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getSongPreview</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Long.html" title="class or interface in java.lang" class="external-link">Long</a>&nbsp;id)</span></div>
<div class="block">Gets the preview link for the given id using songSearchService, since we have to get it externally
 and reload it each time because some links expire after a day.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="SongService.html#getSongPreview(java.lang.Long)">getSongPreview</a></code>&nbsp;in interface&nbsp;<code><a href="SongService.html" title="interface in edu.carroll.initMusic.service">SongService</a></code></dd>
<dt>Parameters:</dt>
<dd><code>id</code> - id to get preview for</dd>
<dt>Returns:</dt>
<dd>String of URL</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
